// This rule file is autogenerated by HABmin.
// Any changes made manually to this file will be overwritten next time HABmin rules are saved.

// Imports
import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

rule "Send to Emoncms"
       when
		Time cron "*/30 * * * * ?"
       then

		logInfo(    "emoncms.rules", "send values")
		All.members.filter( x | x.state == Uninitialized).forEach[ item |

            postUpdate( item, 0)]
		// Sensor 1
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor1_Temperature.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=hiwi_temp")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor1_Luminance.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=hiwi_lux")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor1_Humidity.state as DecimalType + 			"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=hiwi_hum")
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor1_Motion.state as String + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=hiwi_motion")

		// Sensor 2
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor2_Temperature.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=conference_temp")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor2_Luminance.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=conference_lux")
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Sensor2_Motion.state as String + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=conference_motion")

		// Doorcontact HiWi
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Door_Hiwi.state as String + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=doorcontact_hiwi")

		// Doorcontact printing room
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Door_Print.state as String + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=doorcontact_print")

		// Switch 1
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_1.state as String + 			"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch1")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_1_Energy.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch1_energy")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_1_TotalEnergy.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch1_totalenergy")

		// Switch 2
		//sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_2.state as String + 			"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch2")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_2_Energy.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch2_energy")
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Switch_2_TotalEnergy.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=switch2_totalenergy")

		// Thermostat 1
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Thermostat1_Set.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=thermostat1_set")
		
		// Thermostat 2
		sendHttpGetRequest("http://141.69.58.12/emoncms/input/post.json?csv=" + Thermostat2_Set.state as DecimalType + 				"&apikey=18a0b32d9de5da5e039f662018ff15fd&node=thermostat2_set")


end

